package com.spark.repository;

import com.spark.Entity.UserEntity;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;
import java.util.Optional;

@Repository
public interface UserRepository extends JpaRepository<UserEntity, String> {
    
    // ğŸ¯ Entity í•„ë“œê°€ userIdë¡œ ë³€ê²½ë˜ì—ˆë‹¤ë©´:
    Optional<UserEntity> findByUserId(String userId);
    Optional<UserEntity> findByEmail(String email);
    Optional<UserEntity> findByPhone(String phone);
    
    boolean existsByUserId(String userId);
    boolean existsByEmail(String email);
    boolean existsByPhone(String phone);
    
    // âœ… ì•ˆì „í•œ ì €ì¥ì„ ìœ„í•œ ë©”ì„œë“œ ì¶”ê°€
    @Modifying
    @Query("INSERT INTO UserEntity (userId, pw, name, email, phone, birthday, address1, address2, addressnum, position) " +
           "VALUES (:userId, :pw, :name, :email, :phone, :birthday, :address1, :address2, :addressnum, :position)")
    void insertUser(@Param("userId") String userId, 
                   @Param("pw") String pw,
                   @Param("name") String name,
                   @Param("email") String email,
                   @Param("phone") String phone,
                   @Param("birthday") Date birthday,
                   @Param("address1") String address1,
                   @Param("address2") String address2,
                   @Param("addressnum") String addressnum,
                   @Param("position") String position);
}